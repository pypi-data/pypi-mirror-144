{"version":3,"sources":["extensionConfig.es6.js"],"names":[],"mappings":"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","file":"extensionConfig.js","sourcesContent":["{\n\n\nwindow.ReviewBot = window.ReviewBot || {};\n\n\n/**\n * The model for the configuration page.\n *\n * Model Attributes:\n *     brokerURL (string):\n *         The URL for the AMQP broker.\n *\n *     user (number):\n *         The ID of the user for Review Bot to post as.\n */\nReviewBot.ExtensionConfig = Backbone.Model.extend({\n    defaults: {\n        brokerURL: '',\n        user: null,\n    },\n\n    /**\n     * Initialize the model.\n     *\n     * Args:\n     *     attributes (object):\n     *         Initial attribute values for the model.\n     *\n     *     options (object):\n     *         Additional options for the model.\n     *\n     * Option Args:\n     *     integrationConfigURL (string):\n     *         The URL of the integration list page.\n     *\n     *     userConfigURL (string):\n     *         The URL of the user configuration endpoint.\n     *\n     *     workerStatusURL (string):\n     *         The URL of the worker status endpoint.\n     */\n    initialize(attributes, options) {\n        Backbone.Model.prototype.initialize.call(this, attributes, options);\n        this.options = options;\n    },\n});\n\n\n/**\n * A view for configuring the Review Bot user.\n */\nconst UserConfigView = Backbone.View.extend({\n    className: 'rb-c-form-row',\n\n    id: 'reviewbot-user',\n\n    events: {\n        'click #reviewbot-user-create': '_createUser',\n    },\n\n    _templateRB4: _.template(dedent`\n        <div class=\"rb-c-form-field -is-required\">\n         <label class=\"rb-c-form-field__label\" for=\"reviewbot-user-field\"><%- labelText %></label>\n\n         <div class=\"rb-c-form-field__input\">\n          <select class=\"related-object-options reviewbot-user-select\"\n                  name=\"reviewbot_user\"\n                  placeholder=\"<%- selectPlaceholderText %>\"\n                  id=\"reviewbot-user-field\"></select>\n          <span class=\"reviewbot-user-create-details\">\n           <% if (!hasUser) { %><%= orHTML %><% } %>\n          </span>\n          <div class=\"rb-c-form-field__help\"><%- descriptionText %></div>\n         </div>\n        </div>\n    `),\n\n    _templateRB3: _.template(dedent`\n        <div class=\"form-row\">\n         <label class=\"required\" for=\"reviewbot-user-field\"><%- labelText %></label>\n         <select class=\"related-object-options reviewbot-user-select\"\n                 name=\"reviewbot_user\"\n                 placeholder=\"<%- selectPlaceholderText %>\"\n                 id=\"reviewbot-user-field\"></select>\n         <span class=\"reviewbot-user-create-details\">\n          <% if (!hasUser) { %><%= orHTML %><% } %>\n         </span>\n         <p class=\"help\"><%- descriptionText %></p>\n        </div>\n    `),\n\n    _optionTemplate: _.template(dedent`\n        <div>\n        <% if (avatarURL) { %>\n         <img src=\"<%- avatarURL %>\">\n        <% } %>\n        <% if (fullname) { %>\n         <span class=\"title\"><%- fullname %></span>\n         <span class=\"description\">(<%- username %>)</span>\n        <% } else { %>\n         <span class=\"title\"><%- username %></span>\n        <% } %>\n        </div>\n    `),\n\n    /**\n     * Render the view.\n     *\n     * Returns:\n     *     UserConfigView:\n     *     This object, for chaining.\n     */\n    render() {\n        const user = this.model.get('user');\n        const template = RB.Product ? this._templateRB4 : this._templateRB3;\n\n        this.$el.html(template({\n            titleText: gettext('Review Bot User'),\n            labelText: gettext('Review Bot User:'),\n            descriptionText: gettext('Review Bot will use this user account to post reviews.'),\n            selectPlaceholderText: gettext('Select an existing user account'),\n            orHTML: gettext('or <a href=\"#\" id=\"reviewbot-user-create\">create a new user for Review Bot</a>.'),\n            hasUser: (user !== null),\n        }));\n\n        const currentItems = [];\n        const currentOptions = [];\n\n        if (user !== null) {\n            currentItems.push(user.id);\n            currentOptions.push(user);\n        }\n\n        this._$select = this.$('select');\n\n        this._$select.selectize({\n            closeAfterSelect: true,\n            dropdownParent: 'body',\n            hideSelected: true,\n            maxItems: 1,\n            preload: 'focus',\n            items: currentItems,\n            options: currentOptions,\n            searchField: ['fullname', 'username'],\n            valueField: 'id',\n            load: (query, callback) => {\n                const params = {\n                    fullname: 1,\n                    'only-fields': 'avatar_url,fullname,id,username',\n                    'only-links': '',\n                };\n\n                if (query.length !== 0) {\n                    params.q = query;\n                }\n\n                $.ajax({\n                    type: 'GET',\n                    url: SITE_ROOT + 'api/users/',\n                    data: params,\n                    success: result => callback(result.users),\n                    error: (xhr, textStatus, errorThrown) => {\n                        alert('Unexpected error when querying for users: ' +\n                              errorThrown);\n                        console.error('User query failed', xhr, textStatus,\n                                      errorThrown);\n                        callback();\n                    },\n                });\n            },\n            render: {\n                item: item => this._optionTemplate({\n                    avatarURL: item.avatar_url,\n                    id: item.id,\n                    fullname: item.fullname,\n                    username: item.username,\n                }),\n                option: item => this._optionTemplate({\n                    avatarURL: item.avatar_url,\n                    id: item.id,\n                    fullname: item.fullname,\n                    username: item.username,\n                }),\n            },\n        });\n\n        this._selectize = this._$select[0].selectize;\n\n        this.listenTo(this.model, 'change:user', (model, value) => {\n            this._setOption(value);\n        });\n\n        return this;\n    },\n\n    /**\n     * Create a new user.\n     *\n     * Args:\n     *     e (Event):\n     *         The event which triggered the action.\n     */\n    _createUser(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        const $details = this.$('.reviewbot-user-create-details');\n        this._selectize.lock();\n        $details.html('<span class=\"fa fa-spinner fa-pulse\">');\n\n        $.ajax({\n            type: 'POST',\n            url: this.model.options.userConfigURL,\n            complete: () => {\n                this._selectize.unlock();\n                this._selectize.blur();\n                $details.empty();\n            },\n            success: result => {\n                this._setOption(result);\n            },\n            error: (xhr, textStatus, errorThrown) => {\n                alert('Unexpected error when creating the user: ' +\n                      errorThrown);\n                console.error('Failed to update user', xhr, textStatus,\n                              errorThrown);\n            },\n        });\n    },\n\n    /**\n     * Set the currently selected option.\n     *\n     * Args:\n     *     user (object):\n     *          The user details.\n     */\n    _setOption(user) {\n        this._selectize.clear(true);\n        this._selectize.clearOptions();\n        this._selectize.addOption(user);\n        this._selectize.setValue(user.id, true);\n    },\n});\n\n\n/**\n * A view to show the current broker status.\n */\nconst BrokerStatusView = Backbone.View.extend({\n    events: {\n        'click #reviewbot-broker-status-refresh': '_onRefreshClicked',\n    },\n\n    _updatingTemplate: _.template(dedent`\n        <span class=\"fa fa-spinner fa-pulse\"></span>\n        <%- refreshingText %>\n    `),\n\n    _connectedTemplate: _.template(dedent`\n        <div>\n         <span class=\"fa fa-check\"></span>\n         <%- connectedText %>\n        </div>\n        <% if (workers.length === 0) { %>\n         <div>\n          <span class=\"fa fa-exclamation-triangle\"></span>\n          <%- workersText %>\n         </div>\n        <% } else { %>\n         <div>\n          <span class=\"fa fa-check\"></span>\n          <%- workersText %>\n          <ul>\n           <% _.each(workers, function(worker) { %>\n            <li>\n             <span class=\"fa fa-desktop\"></span>\n             <%- worker.hostname %>\n            </li>\n           <% }); %>\n          </ul>\n         </div>\n         <div>\n          <span class=\"fa fa-cogs\"></span>\n          <%- readyText %>\n          <%= configureIntegrationsHTML %>\n         </div>\n        <% } %>\n        <div>\n         <a href=\"#\" id=\"reviewbot-broker-status-refresh\"><%- refreshText %></a>\n        </div>\n    `),\n\n    _errorTemplate: _.template(dedent`\n        <div>\n         <span class=\"fa fa-exclamation-triangle\"></span>\n         <%- errorText %>\n        </div>\n        <div>\n         <a href=\"#\" id=\"reviewbot-broker-status-refresh\"><%- refreshText %></a>\n        </div>\n    `),\n\n    /**\n     * Initialize the view.\n     */\n    initialize() {\n        this._updating = false;\n        this._connected = false;\n        this._rendered = false;\n        this._errorText = '';\n        this._workers = [];\n\n        this.listenTo(this.model, 'change', this._update);\n        this._update();\n    },\n\n    /**\n     * Render the view.\n     *\n     * Returns:\n     *     BrokerStatusView:\n     *     This object, for chaining.\n     */\n    render() {\n        this._$content = $('<div class=\"form-row\">')\n            .appendTo(this.$el);\n\n        this._rendered = true;\n\n        this._updateDisplay();\n\n        return this;\n    },\n\n    /**\n     * Update the displayed status.\n     */\n    _updateDisplay() {\n        if (!this._rendered) {\n            return;\n        }\n\n        if (this._updating) {\n            this._$content.html(this._updatingTemplate({\n                refreshingText: gettext('Checking broker...'),\n            }));\n        } else if (this._connected) {\n            let workersText;\n\n            if (this._workers.length === 0) {\n                workersText = gettext('No worker nodes found.');\n            } else {\n                workersText = interpolate(\n                    ngettext('%s worker node:',\n                             '%s worker nodes:',\n                             this._workers.length),\n                    [this._workers.length]);\n            }\n\n            this._$content.html(this._connectedTemplate({\n                connectedText: gettext('Connected to broker.'),\n                workersText: workersText,\n                refreshText: gettext('Refresh'),\n                workers: this._workers,\n                readyText: gettext('Review Bot is ready!'),\n                configureIntegrationsHTML: interpolate(\n                    gettext('To configure when Review Bot tools are run, set up <a href=\"%s\">integration configurations</a>.'),\n                    [this.model.options.integrationConfigURL]),\n            }));\n        } else {\n            this._$content.html(this._errorTemplate({\n                errorText: this._errorText,\n                refreshText: gettext('Refresh'),\n            }));\n        }\n    },\n\n    /**\n     * Handler for when the \"Refresh\" link is clicked.\n     *\n     * Args:\n     *     e (Event):\n     *         The event which triggered the action.\n     */\n    _onRefreshClicked(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        this._update();\n    },\n\n    /**\n     * Request status from the server and update the UI.\n     */\n    _update() {\n        if (this._updating) {\n            return;\n        }\n\n        this._updating = true;\n        this._updateDisplay();\n\n        $.ajax({\n            type: 'GET',\n            url: this.model.options.workerStatusURL,\n            success: result => {\n                this._workers = result.hosts || [];\n                this._connected = (result.state === 'success');\n                this._errorText = result.error || '';\n                this._updating = false;\n                this._updateDisplay();\n            },\n            error: (xhr, textStatus, errorThrown) => {\n                console.error('Failed to get broker status', xhr, textStatus,\n                              errorThrown);\n                this._errorText = gettext('Unable to connect to broker.');\n                this._workers = [];\n                this._connected = false;\n                this._updating = false;\n                this._updateDisplay();\n            },\n        });\n    },\n});\n\n\n/**\n * A view for configuring the broker URL.\n */\nconst BrokerConfigView = Backbone.View.extend({\n    id: 'reviewbot-broker',\n\n    className: 'rb-c-form-row',\n\n    _templateRB4: _.template(dedent`\n        <div class=\"rb-c-form-field -is-required\">\n         <label class=\"rb-c-form-field__label\" for=\"reviewbot-broker-field\"><%- labelText %></label>\n\n         <div class=\"rb-c-form-field__input\">\n          <input id=\"reviewbot-broker-field\" name=\"reviewbot_broker_url\"\n                 type=\"text\" value=\"<%- brokerURL %>\">\n          <div class=\"rb-c-form-field__help\"><%- descriptionText %></div>\n         </div>\n        </div>\n    `),\n\n    _templateRB3: _.template(dedent`\n        <div class=\"form-row\">\n         <label class=\"required\" for=\"reviewbot-broker-field\"><%- labelText %></label>\n         <input id=\"reviewbot-broker-field\" name=\"reviewbot_broker_url\"\n                type=\"text\" value=\"<%- brokerURL %>\">\n         <p class=\"help\"><%- descriptionText %></p>\n        </div>\n    `),\n\n    /**\n     * Render the view.\n     *\n     * Returns:\n     *     BrokerConfigView:\n     *     This object, for chaining.\n     */\n    render() {\n        const template = RB.Product ? this._templateRB4 : this._templateRB3;\n\n        this.$el.html(template({\n            titleText: gettext('Broker'),\n            labelText: gettext('Broker URL:'),\n            descriptionText: gettext('The URL to your AMQP broker.'),\n            brokerURL: this.model.get('brokerURL'),\n        }));\n\n        return this;\n    }\n});\n\n\n/**\n * A view containing the entire Review Bot extension configuration.\n */\nconst ConfigView = Backbone.View.extend({\n    events: {\n        'click input[type=\"submit\"]': '_onSaveClicked',\n    },\n\n    _templateRB4: dedent`\n        <form class=\"rb-c-form -is-aligned\">\n         <fieldset class=\"rb-c-form-fieldset\">\n          <div class=\"rb-c-form-fieldset__content\">\n           <div class=\"rb-c-form-fieldset__fields\">\n           </div>\n          </div>\n         </fieldset>\n         <div class=\"rb-c-form__actions\">\n          <div class=\"rb-c-form__actions-primary\">\n           <input type=\"submit\" class=\"rb-c-form__action -is-primary\">\n          </div>\n         </div>\n        </form>\n    `,\n\n    _templateRB3: dedent`\n        <form class=\"rb-c-form-fieldset__fields\">\n        </form>\n        <div class=\"submit-row\">\n         <input type=\"submit\" class=\"rb-c-form-action -is-primary default\">\n        </div>\n    `,\n\n    /**\n     * Initialize the view.\n     */\n    initialize() {\n        this._userConfigView = new UserConfigView({\n            model: this.model,\n        });\n\n        this._brokerConfigView = new BrokerConfigView({\n            model: this.model,\n        });\n    },\n\n    /**\n     * Render the view.\n     *\n     * Returns:\n     *     ConfigView:\n     *     This object, for chaining.\n     */\n    render() {\n        this._userConfigView.render();\n        this._brokerConfigView.render();\n\n        const template = RB.Product ? this._templateRB4 : this._templateRB3;\n        this.$el.html(template);\n\n        this._$form = this.$('form');\n\n        this.$('.rb-c-form-fieldset__fields')\n            .append(this._userConfigView.$el)\n            .append(this._brokerConfigView.$el);\n\n        this._$saveButton = this.$('input[type=\"submit\"]')\n            .val(gettext('Save'));\n\n        return this;\n    },\n\n    /**\n     * Callback for when the \"Save\" button is clicked.\n     *\n     * This saves the form and updates the model.\n     */\n    _onSaveClicked(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        this._$saveButton.prop('disabled', true);\n\n        const $spinner = $('<span class=\"fa fa-spinner fa-pulse\">')\n            .insertBefore(this._$saveButton);\n\n        $.ajax({\n            type: 'POST',\n            url: window.location.pathname,\n            data: this._$form.serialize(),\n            complete: () => {\n                this._$saveButton.prop('disabled', false);\n                $spinner.remove();\n            },\n            success: response => {\n                if (response.result === 'success') {\n                    if (response.broker_url) {\n                        this.model.set('brokerURL', response.broker_url);\n                    }\n\n                    if (response.user) {\n                        this.model.set('user', response.user);\n                    }\n                } else if (response.result === 'error') {\n                    console.error('Failed to save Review Bot configuration',\n                                  response);\n                    alert(response.error);\n                } else {\n                    console.error('Unexpected response from server when ' +\n                                  'saving Review Bot configuration.',\n                                  response);\n                }\n            },\n            error: (xhr, textStatus, errorThrown) => {\n                alert('Unexpected error when querying broker: ' +\n                      errorThrown);\n                console.error('Failed to update broker', xhr, textStatus,\n                              errorThrown);\n            },\n        });\n    },\n});\n\n\n/**\n * A view containing the extension config and broker status.\n */\nReviewBot.ExtensionConfigView = Backbone.View.extend({\n    _templateRB4: _.template(dedent`\n        <header class=\"rb-c-content-header -is-main\">\n         <h1 class=\"rb-c-content-header__title\"><%- configureText %></h1>\n        </header>\n        <div class=\"rb-c-page-content-box -is-content-flush\"\n\t        id=\"reviewbot-extension-config\"></div>\n\n        <header class=\"rb-c-content-header -is-main\">\n         <h1 class=\"rb-c-content-header__title\"><%- brokerText %></h1>\n        </header>\n        <div class=\"rb-c-page-content-box\" id=\"reviewbot-broker-status\"></div>\n    `),\n\n    _templateRB3: _.template(dedent`\n        <h1 class=\"title\"><%- configureText %></h1>\n        <div id=\"content-main\">\n         <fieldset class=\"module aligned\" id=\"reviewbot-extension-config\"></fieldset>\n\n         <fieldset class=\"module aligned\" id=\"reviewbot-broker-status\">\n          <h2><%- brokerText %></h2>\n         </div>\n        </fieldset>\n    `),\n\n    /**\n     * Render the view.\n     *\n     * Returns:\n     *     ReviewBot.ExtensionConfigView:\n     *     This object, for chaining.\n     */\n    render() {\n        const template = RB.Product ? this._templateRB4 : this._templateRB3;\n        this.$el.html(template({\n            configureText: gettext('Configure Review Bot'),\n            brokerText: gettext('Broker Status'),\n        }));\n\n        this._view = new ConfigView({\n\t    model: this.model,\n            el: this.$('#reviewbot-extension-config')\n\t});\n\tthis._statusView = new BrokerStatusView({\n\t    model: this.model,\n\t    el: this.$('#reviewbot-broker-status')\n\t});\n\n        this._view.render();\n        this._statusView.render();\n\n        return this;\n    },\n});\n\n\n}\n"]}