"use strict";(self.webpackChunk_tiledb_inc_pybabylonjs=self.webpackChunk_tiledb_inc_pybabylonjs||[]).push([[592],{8657:(e,t,n)=>{n.d(t,{Y:()=>o,o:()=>l});const i=n(4147),o=i.version,l=i.name},5592:(e,t,n)=>{n.r(t),n.d(t,{BabylonJSModel:()=>w,BabylonJSView:()=>_});var i=n(8233),o=n(8657),l=n(4687),s=n(2611),r=n(3379),a=n.n(r),c=n(7795),d=n.n(c),u=n(569),p=n.n(u),h=n(3565),b=n.n(h),m=n(9216),g=n.n(m),v=n(4589),f=n.n(v),y=n(3889),x={};x.styleTagTransform=f(),x.setAttributes=b(),x.insert=p().bind(null,"head"),x.domAPI=d(),x.insertStyleElement=g(),a()(y.Z,x),y.Z&&y.Z.locals&&y.Z.locals;class w extends i.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:w.model_name,_model_module:w.model_module,_model_module_version:w.model_module_version,_view_name:w.view_name,_view_module:w.view_module,_view_module_version:w.view_module_version,extents:[],query:null,value:null,token:"",uri:"",width:700,height:500,wheel_precision:50,z_scale:.5})}}w.serializers=Object.assign({},i.DOMWidgetModel.serializers),w.model_name="BabylonJSModel",w.model_module=o.o,w.model_module_version=o.Y,w.view_name="BabylonJSView",w.view_module=o.o,w.view_module_version=o.Y;class _ extends i.DOMWidgetView{render(){document.createElement("div").id="loadingScreen",this.canvas=document.createElement("canvas"),this.canvas.classList.add("renderCanvas"),this.el.appendChild(this.canvas),this.model.on("change:query",this.query_changed,this),this.model.on_some_change(["width","height"],this.resizeCanvas,this),this.engine=new l.Engine(this.canvas,!0),l.SceneLoader.ShowLoadingScreen=!0,this.resizeCanvas();const e=this.createScene();this.engine.runRenderLoop((()=>{e.render()}))}createScene(){const e=new l.Scene(this.engine);new l.PointLight("Point",new l.Vector3(5,10,5),e);const t=new l.ArcRotateCamera("Camera",1,.8,3,new l.Vector3(0,0,0),e);t.attachControl(this.canvas,!0);const n=JSON.parse(this.model.get("value")),i=this.model.get("extents"),o=this.model.get("z_scale"),r=this.model.get("wheel_precision"),a=n.X.length,c=i[0],d=i[1],u=i[2],p=i[3],h=i[4],b=i[5],m=this.model.get("add");t.wheelPrecision=r;var g=new l.PointsCloudSystem("pcs",1,e,{updatable:!0}),v="";if(7===Object.keys(n).length){const t=new s.StackPanel;for(var f of(t.width="200px",t.height="40px",t.paddingLeft="5px",t.paddingRight="5px",t.isVertical=!0,t.horizontalAlignment=s.Control.HORIZONTAL_ALIGNMENT_CENTER,t.verticalAlignment=s.Control.VERTICAL_ALIGNMENT_BOTTOM,Object.keys(n)))if(-1===["X","Y","Z","Red","Green","Blue"].indexOf(f)){v=f;break}var y=null,x=null;v.length>0&&(x=n[v],(y=new s.TextBlock).text=x[0],y.height="20px",y.fontSize="14px",y.color="whitesmoke",y.textHorizontalAlignment=s.Control.HORIZONTAL_ALIGNMENT_CENTER,y.textVerticalAlignment=s.Control.VERTICAL_ALIGNMENT_BOTTOM,y.paddingTop="2px",y.paddingBottom="2px");const i=new s.Slider(v);i.height="18px",i.width="200px",i.paddingBottom="2px",i.borderColor="black",i.color="orange",i.background="grey",i.minimum=0,i.maximum=n.X.length-1,i.step=1,i.value=0,g.updateParticle=function(e){return e.position.z<1.1?e.position=e.position.add(new l.Vector3(0,0,999999)):e.position=e.position.subtract(new l.Vector3(0,0,999999)),e};var w=0;const r=function(e){for(var t=0,i=0,o=0;o<=w;o++)o<w?(t+=n.X[o].length,i+=n.X[o].length):i+=n.X[o].length;for(var l=0,s=0,r=0;r<=e;r++)r<e?(l+=n.X[r].length,s+=n.X[r].length):s+=n.X[r].length;w=e,y&&(y.text=x[e]),g.setParticles(t,i-1),g.setParticles(l,s-1)},a=function(e){for(var t=w<e?w:e,i=e>w?e:w,o=0,l=0,s=0;s<=i;s++)s<=t?(o+=n.X[s].length,l+=n.X[s].length):l+=n.X[s].length;w=e,y&&(y.text=x[e]),g.setParticles(o,l-1)};m?i.onValueChangedObservable.add(a):i.onValueChangedObservable.add(r),s.AdvancedDynamicTexture.CreateFullscreenUI("ui",!0,e).addControl(t),y&&t.addControl(y),t.addControl(i);const _={X:n.X.flat(),Y:n.Y.flat(),Z:n.Z.flat(),Red:n.Red.flat(),Green:n.Green.flat(),Blue:n.Blue.flat()},j=function(e,t,n){e.position=new l.Vector3((_.X[t]-c)/(d-c),(_.Y[t]-u)/(p-u),(_.Z[t]-h)/(b-h)*o),e.color=new l.Color3(_.Red[t],_.Green[t],_.Blue[t])};g.addPoints(_.X.length,j),g.buildMeshAsync().then((e=>{g.setParticles(n.X[0].length,_.X.length)}))}else{const e=function(e,t,i){e.position=new l.Vector3((n.X[t]-c)/(d-c),(n.Y[t]-u)/(p-u),(n.Z[t]-h)/(b-h)*o),e.color=new l.Color3(n.Red[t],n.Green[t],n.Blue[t])};g.addPoints(a,e),g.buildMeshAsync()}return e}resizeCanvas(){var e,t,n;null===(e=this.canvas)||void 0===e||e.setAttribute("width",this.model.get("width")),null===(t=this.canvas)||void 0===t||t.setAttribute("height",this.model.get("height")),null===(n=this.engine)||void 0===n||n.resize()}query_changed(){}}},3889:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(8081),o=n.n(i),l=n(3645),s=n.n(l)()(o());s.push([e.id,"#renderCanvas {\n  width: 100%;\n  height: 100%;\n  touch-action: none;\n}\n",""]);const r=s},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,o,l){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(i)for(var r=0;r<this.length;r++){var a=this[r][0];null!=a&&(s[a]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);i&&s[d[0]]||(void 0!==l&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=l),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},8081:e=>{e.exports=function(e){return e[1]}},3379:e=>{var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var l={},s=[],r=0;r<e.length;r++){var a=e[r],c=i.base?a[0]+i.base:a[0],d=l[c]||0,u="".concat(c," ").concat(d);l[c]=d+1;var p=n(u),h={css:a[1],media:a[2],sourceMap:a[3]};-1!==p?(t[p].references++,t[p].updater(h)):t.push({identifier:u,updater:o(h,i),references:1}),s.push(u)}return s}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var l=i(e=e||[],o=o||{});return function(e){e=e||[];for(var s=0;s<l.length;s++){var r=n(l[s]);t[r].references--}for(var a=i(e,o),c=0;c<l.length;c++){var d=n(l[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}l=a}}},569:e=>{var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t),t}},3565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i=n.css,o=n.media,l=n.sourceMap;o?e.setAttribute("media",o):e.removeAttribute("media"),l&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(l))))," */")),t.styleTagTransform(i,e)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},4147:e=>{e.exports=JSON.parse('{"name":"@tiledb-inc/pybabylonjs","version":"1.0.4","description":"BabylonJS widget","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css","style/*.css","style/index.js"],"author":{"name":"TileDB","email":"support@tiledb.com"},"homepage":"https://github.com/TileDB-Inc/PyBabylonJS","bugs":{"url":"https://github.com/TileDB-Inc/PyBabylonJS/issues"},"license":"MIT","main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/TileDB-Inc/PyBabylonJS"},"scripts":{"build":"jlpm run build:lib && jlpm run build:labextension:dev","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:dist":"NODE_OPTIONS=--max-old-space-size=4096 webpack --mode=production","build:prod":"jlpm run clean && jlpm run build:lib && jlpm run build:labextension && jlpm run build:dist","clean":"jlpm run clean:lib","clean:all":"jlpm run clean:lib && jlpm run clean:labextension","clean:labextension":"rimraf pybabylonjs/labextension","clean:lib":"rimraf lib tsconfig.tsbuildinfo","clean:nbextension":"rimraf pybabylonjs/nbextension/static/index.js","eslint":"eslint . --ext .ts,.tsx --fix","eslint:check":"eslint . --ext .ts,.tsx","install:extension":"jlpm run build","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","test":"echo test","watch":"run-p watch:src watch:labextension","watch:labextension":"jupyter labextension watch .","watch:lib":"tsc -w","watch:nbextension":"NODE_OPTIONS=--max-old-space-size=4096 webpack --watch --mode=development","watch:src":"tsc -w"},"dependencies":{"@babylonjs/core":"^4.2.0","@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4","@jupyterlab/application":"^3.2.0","@tiledb-inc/tiledb-cloud":"^0.0.8","babylonjs-gui":"^4.2.0"},"devDependencies":{"@babylonjs/core":"^4.2.0","@jupyterlab/builder":"^3.1.0","@types/node":"^10.11.6","@types/webpack-env":"^1.16.2","@typescript-eslint/eslint-plugin":"^4.8.1","@typescript-eslint/parser":"^4.8.1","crypto":"1.0.1","css-loader":"^6.3.0","eslint":"^7.14.0","eslint-config-prettier":"^6.15.0","eslint-plugin-prettier":"^3.1.4","expect.js":"^0.3.1","fs-extra":"^7.0.0","git-tag-version":"^1.3.1","mkdirp":"^0.5.1","npm-run-all":"^4.1.5","prettier":"^2.1.1","rimraf":"^3.0.2","source-map-loader":"^3.0.0","style-loader":"^3.2.1","svg-url-loader":"^7.1.1","ts-loader":"^9.2.5","typescript":"~4.1.3","webpack":"^5.53.0","webpack-cli":"^4.8.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"pybabylonjs/labextension"},"styleModule":"style/index.js"}')}}]);