"use strict";(self["webpackChunk_quetz_frontend_main_app"]=self["webpackChunk_quetz_frontend_main_app"]||[]).push([[420,9398],{6277:(e,a,t)=>{t.d(a,{Z:()=>l});function n(e){var a,t,l="";if(typeof e==="string"||typeof e==="number"){l+=e}else if(typeof e==="object"){if(Array.isArray(e)){for(a=0;a<e.length;a++){if(e[a]){if(t=n(e[a])){l&&(l+=" ");l+=t}}}}else{for(a in e){if(e[a]){l&&(l+=" ");l+=a}}}}return l}function l(){var e=0,a,t,l="";while(e<arguments.length){if(a=arguments[e++]){if(t=n(a)){l&&(l+=" ");l+=t}}}return l}},19398:(e,a,t)=>{t.r(a);t.d(a,{List:()=>b,PaginatedList:()=>f,PaginatedTable:()=>E,Pagination:()=>p,Table:()=>h});var n=t(98078);var l=t(93670);var o=t(6277);var s=t(2411);var r=t(30325);var i=t(5089);var c=t(34494);var g=t(26074);const p=({pageSize:e,pageCount:a,gotoPage:t,canPreviousPage:n,previousPage:l,nextPage:o,canNextPage:p,pageIndex:u,pageOptions:d,setPageSize:m,loading:b})=>s.createElement("div",{className:"jp-table-controls"},s.createElement("div",{className:"jp-table-controls-left"},s.createElement("div",{className:"btn-group"},s.createElement(c.Button,{title:"Go to first page",appearance:"stealth",onClick:()=>t(0),disabled:!n},s.createElement(i.FontAwesomeIcon,{icon:r.faAngleDoubleLeft})),s.createElement(c.Button,{title:"Go to previous page",appearance:"stealth",onClick:()=>l(),disabled:!n},s.createElement(i.FontAwesomeIcon,{icon:r.faAngleLeft})),s.createElement(c.Button,{title:"Go to next page",appearance:"stealth",onClick:()=>o(),disabled:!p},s.createElement(i.FontAwesomeIcon,{icon:r.faAngleRight})),s.createElement(c.Button,{title:"Go to last page",appearance:"stealth",onClick:()=>t(a-1),disabled:!p},s.createElement(i.FontAwesomeIcon,{icon:r.faAngleDoubleRight}))),s.createElement("div",{className:"jp-table-controls-text"},b?s.createElement(g.InlineLoader,null):s.createElement("p",{className:"paragraph padding-text"},"Page"," ",s.createElement("strong",null,u+1," of ",d.length)))),s.createElement("div",{className:"jp-table-controls-right jp-table-controls-text"},s.createElement("p",{className:"paragraph padding-side"},"Go to page: â€ƒ",s.createElement(c.NumberField,{value:u+1,onChange:e=>{const a=e.target.value?Number(e.target.value)-1:0;t(a)},style:{width:"100px"}})),s.createElement("p",{className:"paragraph padding-side"},s.createElement(c.Select,{value:e,onChange:e=>{m(Number(e.target.value))}},[25,50,100].map((e=>s.createElement(c.Option,{key:e,value:e.toString(),defaultValue:"25"},"Show ",e)))))));const u=(e,{column:a})=>m(e,a.align);const d=(e,{cell:a})=>m(e,a.column.align);const m=(e,a="left")=>[e,{style:{justifyContent:a==="right"?"flex-end":"flex-start",alignItems:"flex-start",display:"flex"}}];const b=({columns:e,data:a,to:t,paginated:n,fetchData:r,loading:i,pageCount:c,dataSize:g})=>{const m={width:150};const{getTableProps:b,headerGroups:f,prepareRow:S,rows:P,page:h,canPreviousPage:E,canNextPage:v,pageOptions:x,pageCount:y,gotoPage:C,nextPage:z,previousPage:w,setPageSize:N,state:{pageIndex:k,pageSize:j}}=(0,l.useTable)({columns:e,data:a,defaultColumn:m,initialState:{pageIndex:0},manualPagination:n,pageCount:c},l.useFlexLayout,(e=>{e.allColumns.push((e=>[...e]))}),...n?[l.usePagination]:[]);if(n){s.useEffect((()=>{r({pageIndex:k,pageSize:j})}),[r,k,j])}const I=g>j;return s.createElement(s.Fragment,null,s.createElement("div",Object.assign({},b(),{className:"table"}),s.createElement("div",null,f.map(((e,a)=>s.createElement("div",Object.assign({},e.getHeaderGroupProps({}),{className:"tr",key:a}),e.headers.map((e=>s.createElement("div",Object.assign({},e.getHeaderProps(u),{className:"th",key:e.id}),e.render("Header")))))))),s.createElement("div",{className:"tbody"},((n?h:P)||[]).map((e=>{S(e);return s.createElement("div",Object.assign({},e.getRowProps(),{key:e.id,className:(0,o.Z)("tr","list-row",{clickable:!!t}),onClick:()=>{if(t){t(e.original)}}}),e.cells.map((e=>s.createElement("div",Object.assign({},e.getCellProps(d),{className:"td",key:e.column.id}),e.render("Cell")))))})),s.createElement("div",{className:"tr"},!i&&a.length===0&&s.createElement("div",{className:"padding-bottom padding-top"},"No data available")))),n&&I&&s.createElement(p,{pageSize:j,pageCount:y,gotoPage:C,canPreviousPage:E,previousPage:w,nextPage:z,canNextPage:v,pageIndex:k,pageOptions:x,setPageSize:N,loading:i}))};const f=({url:e,columns:a,to:t,q:l})=>{const[o,r]=s.useState([]);const[i,c]=s.useState(false);const[g,p]=s.useState(0);const[u,d]=s.useState(0);const m=s.useRef(0);const f=s.useCallback((async({pageSize:a,pageIndex:t})=>{const o=++m.current;c(true);const s=JSON.stringify(Object.assign(Object.assign({},l),{skip:t*a,limit:a}));const i=n.ServerConnection.makeSettings();const g=await n.ServerConnection.makeRequest(`${e}?${s}`,{},i);const u=await g.json();if(u&&o===m.current){r(u.result);d(u.pagination.all_records_count);p(Math.ceil(u.pagination.all_records_count/a));c(false)}}),[]);return s.createElement(b,{columns:a,data:o,to:t,paginated:true,fetchData:f,loading:i,pageCount:g,dataSize:u})};var S=t(25047);const P=({pageSize:e,pageIndex:a,query:t})=>{const n=new URLSearchParams(window.location.search);const l=n.get("index");const o=n.get("size");const s=n.get("query")||"";if(!l&&a===0&&!t){return}if(l!=a||o!=e||s!=t){n.delete("size");n.append("size",e);n.delete("index");n.append("index",a);if(t){n.delete("query");n.append("query",t)}window.history.pushState(null,"","?"+n.toString())}};const h=({columns:e,data:a,dataSize:t,fetchData:n,renderRowSubComponent:r,loading:i,paginated:g,pageIndex:u,pageSize:d,pageCount:m,enableSearch:b,query:f})=>{const S=s.useRef(false);const{getTableProps:P,getTableBodyProps:h,headerGroups:E,prepareRow:v,rows:x,page:y,canPreviousPage:C,canNextPage:z,pageOptions:w,pageCount:N,gotoPage:k,nextPage:j,previousPage:I,setPageSize:O,setGlobalFilter:q,state:{pageIndex:R,pageSize:_,globalFilter:F}}=(0,l.useTable)({columns:e,data:a,initialState:{pageIndex:u,pageSize:d,globalFilter:f},manualPagination:g,autoResetPage:true,pageCount:m,manualGlobalFilter:b,autoResetGlobalFilter:true},...b?[l.useGlobalFilter]:[],l.useExpanded,...g?[l.usePagination]:[]);const G=(0,l.useAsyncDebounce)(n,100);s.useEffect((()=>{if(S.current){k(0)}S.current=false;G({pageIndex:R,pageSize:_,query:F})}),[G,R,_,F]);const A=t>_;return s.createElement(s.Fragment,null,b&&s.createElement(c.Search,{className:"table-search-input",placeholder:"Search",value:F||"",onChange:e=>{S.current=true;q(e.target.value)}}),s.createElement("table",Object.assign({},P(),{className:"jp-table"}),s.createElement("thead",null,E.map(((e,a)=>s.createElement("tr",Object.assign({},e.getHeaderGroupProps(),{key:a}),e.headers.map((e=>s.createElement("th",Object.assign({},e.getHeaderProps(),{key:e.id}),e.render("Header")))))))),s.createElement("tbody",Object.assign({},h()),((g?y:x)||[]).map((e=>{v(e);return s.createElement(s.Fragment,{key:e.id},s.createElement("tr",Object.assign({key:e.id},e.getRowProps(),{className:(0,o.Z)({expanded:e.isExpanded})}),e.cells.map((e=>s.createElement("td",Object.assign({},e.getCellProps(),{key:e.column.id}),e.render("Cell"))))),e.isExpanded?s.createElement("tr",null,s.createElement("td",{colSpan:5,className:"jp-table-expanded-contents"},r({row:e}))):null)})),s.createElement("tr",null,!i&&a.length===0&&s.createElement("td",{colSpan:1e4},"No data available")))),g&&A&&s.createElement(p,{pageSize:_,pageCount:N,gotoPage:k,canPreviousPage:C,previousPage:I,nextPage:j,canNextPage:z,pageIndex:R,pageOptions:w,setPageSize:O,loading:i}))};const E=({url:e,columns:a,renderRowSubComponent:t,enableSearch:l})=>{const o=new URLSearchParams(window.location.search);const r=parseInt(o.get("index")||"0");const i=parseInt(o.get("size")||"25");const c=o.get("query")||"";const[g,p]=s.useState({data:[],dataSize:0,loading:false,pageIndex:r,pageSize:i,pageCount:0,query:c});const u=s.useRef(0);const d=s.useCallback((async({pageSize:a,pageIndex:t,query:l})=>{const o=++u.current;p(Object.assign(Object.assign({},g),{loading:true}));const s={skip:t*a,limit:a,q:l};let r="";for(const e of Object.keys(s)){if(s[e]){if(r.length){r+="&"}r+=e+"="+encodeURIComponent(s[e])}}const i=n.ServerConnection.makeSettings();const c=await n.ServerConnection.makeRequest(`${e}?${r}`,{},i);const d=await c.json();if(d&&o===u.current){P({pageIndex:t,pageSize:a,query:l});p({data:d.result,dataSize:d.pagination.all_records_count,loading:false,pageIndex:t,pageSize:a,pageCount:Math.ceil(d.pagination.all_records_count/a),query:l})}}),[]);return s.createElement(h,{columns:a,data:g.data,dataSize:g.dataSize,fetchData:d,renderRowSubComponent:t,loading:g.loading,paginated:true,pageIndex:g.pageIndex,pageSize:g.pageSize,pageCount:g.pageCount,enableSearch:l,query:g.query})}}}]);